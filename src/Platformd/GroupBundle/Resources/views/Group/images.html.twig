{% set reportContentType    = 'GroupImage' %}
{% set site                 = get_current_site() %}
{% set canAdd               = group.isAllowedTo(app.user, site, 'AddImage') %}
{% set canEdit              = group.isAllowedTo(app.user, site, 'EditImage') %}
{% set canDelete            = group.isAllowedTo(app.user, site, 'DeleteImage') %}
{% set addImageUrl          = site_has_feature('PHOTOS') ? path('gallery_submit') : path('group_add_image') %}



<div>
    {% if pages | length > 0 %}
        {% if canAdd %}
            <a href='{{ addImageUrl }}'>Submit image(s)</a>.
        {% else %}
            Want to add an image? Become a member of our group.
        {% endif %}
    {% else %}
        {% if canAdd %}
            There are no images. <a href='{{ addImageUrl }}'>Submit image(s)</a>.
        {% else %}
            There are no images. Want to add an image? Become a member of our group.
        {% endif %}
    {% endif %}
</div>

{% if pages | length > 0 %}
    <div class="scrollable" id="scrollable-images" style="height: 550px; width: 600px;background: #191919;">
        <div class="items">
            {% for page in pages %}
            <div class="items-wrapper">
            {% for imageList in page %}
                {% for image in imageList %}
                    <div class="group-image-item">
                        <div class="group-image-image">
                            <a href="{{ path('group_image_show', { id: image.id }) }}" title="{{ image.title }}" img-data="{{ image.image.id }}" style="border:none;">
                                <img src="{{ image.image.filename | imagine_filter('image_thumb_small') }}" alt="{{ image.title }}" />
                            </a>
                        </div>
                        <div class="group-image-title">
                            {{ image.title }}
                        </div>
                        <div class="group-image-actions">
                            {% if canDelete %}
                                <a href="{{ path('group_delete_image', { 'id' : group.id, 'imageId' : image.id })}}" onclick="return confirm('Are you sure you want to delete this image image?');">Delete</a> |
                            {% endif %}
                            {% if canEdit %}
                                <a href="{{ path('group_edit_image', { 'id' : group.id, 'imageId' : image.id })}}">Edit</a> |
                            {% endif %}
                            <a href="javascript:void(0);" class="report-content" report-data="{{ image.id }}">Report</a>
                        </div>
                    </div>
                {% endfor %}
            {% endfor %}
            </div>
        {% endfor %}
        </div>
    </div>
    <div id="scroll-actions" style="margin-top: 10px;">
        <a class="prev browse" style="float: left;">Previous</a>
        <a class="next browse" style="float: right;">See More</a>
    </div>
{% endif %}
{% include 'SpoutletBundle::_reportContentPopup.html.twig' %}
