{% extends 'SpoutletBundle::layout.html.twig' %}

{% block content %}

    {% if firstGame %}
        <div id="theater_screen" class="align_center" style="width:950px; height:393px;"></div>
    {% endif %}


    <div class="games-list-page">
        <div class="left">
            <h1>{{ 'games_trailers.channel_header' | trans }}</h1>
            <p>{{ 'games_trailers.intro_text' | trans }}</p>

            {% for category,gamePages in categorizedGames %}
                <h3>{{ ('games_trailers.categories.'~category) | trans }}</h3>
                <ul>
                    {% for gamePage in gamePages %}
                        {% set url = '#' %}
                        <li>
                            <a href="{{ url }}">
                                {% if gamePage.game.logo %}
                                    <img src="{{ media_path(gamePage.game.logo, {'local': true}) | imagine_filter('game_list_logo') }}" alt="{{ gamePage.game.name }}" />
                                {% else %}
                                    <img src="{{ 'bundles/spoutlet/images/alienwarelogothumb.png' | imagine_filter('game_list_logo') }}" alt="{{ gamePage.game.name }}" />
                                {% endif %}
                            </a>

                            <a href="{{ url }}">{{ gamePage.game.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% endfor %}
        </div>
        <div class="right">

        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {# temporarily disabled because the auto-play is annoying #}
    {% if firstGame and false %}
        <script type="text/javascript" src="{{ asset('bundles/spoutlet/js/swfobject.js') }}"></script>

        <script type="text/javascript">
            jQuery(document).ready(function() {
                var par = {};
                par.flashvars = "startMovie=5iuGhLQeaoE";
                par.flashvars += "&startCue=none";
                par.flashvars += "&startParameterMovie="; // + getMovieFromURL();
                par.flashvars += "&videoTitle=";
                par.flashvars += "&displayWelcome=no";
                par.flashvars += "&displayAlert=no";
                par.flashvars += "&alertText=";
                par.allowScriptAccess = "always";
                par.wmode = "transparent";
                var att = { data:"{{ asset('bundles/spoutlet/swf/games_trailers_player.swf') }}", width:"950", height:"393", id:"theater_screen", name:"theater_screen"};
                var id = "theater_screen";
                myytplayer = swfobject.createSWF(att, par, id);

                var obj = swfobject.getObjectById('theater_screen');
            });
        </script>
    {% endif %}
{% endblock %}