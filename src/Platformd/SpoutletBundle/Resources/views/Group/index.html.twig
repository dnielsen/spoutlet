{% extends 'SpoutletBundle::layout.html.twig' %}

{% block content %}

<a class="btn btn-primary" href="{{ path('group_new_getting_started') }}">
    Create a new group
</a>

<div class="widget-100">
    <div class="widget-header">
        <div class="widget-title">Groups</div>
    </div>
    <div class="widget-content">
        <table>
            <tbody><tr>
                <th style="width:400px;">Name</th>
                <th style="width:300px;">Status</th>
                <th style="width:200px;">Actions</th>
            </tr>
             {% for group in entities %}
            <tr class="eventListGroup_lan">
                <td>
                    {% if group.isPublic or group.isMember(app.user) %}
                        <a href="{{ path('group_show', { 'id': group.id }) }}">{{ group.name }}</a>
                    {% else %}
                        {{ group.name }}
                    {% endif %}
                </td>
                <td>
                    {% if group.isPublic %}
                        <span class="label label-success">Public</span>
                    {% else %}
                        <span class="label label-warning">Private</span>
                    {% endif %}
                </td>
                <td>
                    {% if group.isMember(app.user) %}
                        <a href="{{ path('group_leave', { 'id': group.id }) }}" onclick="return confirm('Are you sure you want to leave this group?');">Leave Group</a>
                    {% else %}
                        {% if group.isPublic %}
                            <a href="{{ path('group_join', { 'id': group.id }) }}">Join Group</a>
                        {% else %}
                            <a href="{{ path('group_apply', { 'id': group.id }) }}">Apply to Join Group</a>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% else %}
                <tr>
                    <td colspan="2">
                        <em>There are no groups!</em>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="widget-footer">&nbsp;</div>
</div>

{% endblock %}
