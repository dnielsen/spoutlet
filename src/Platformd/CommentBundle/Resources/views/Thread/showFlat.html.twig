{#

 This file is part of the FOSCommentBundle package.

 (c) FriendsOfSymfony <http://friendsofsymfony.github.com/>

 This source file is subject to the MIT license that is bundled
 with this source code in the file LICENSE.

#}

<div class="fos_comment_thread_show" id="commentsView">

    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
        {% include "FOSCommentBundle:Comment:new.html.twig" with {"form": newCommentForm, "first": 0 == thread.numComments, "thread": thread} %}
    {% else %}
        {{ 'platformd.comment.login_to_comment' | trans({
            '%login_url%': path('fos_user_security_login', { 'return': app.request.uri })
        }) | raw }}
    {% endif %}

    {% if thread.numComments > 0 %}
        <h3>
            {% transchoice thread.numComments with {'%num%': thread.numComments} from "FOSCommentBundle" %}Showing %num% comment|Showing %num% comments{% endtranschoice %}
        </h3>
        <div class="fos_comment_thread_comments" id="commentList">
            {# show the flat comments, but default the sorting to be newest first #}
            {% render "FOSCommentBundle:Comment:flatPaged" with {'page': page, "thread": thread, "sorter": sorter|default('date_desc')} %}
        </div>
    {% endif %}

    <div class="fos_comment_reply_prototype">
        {% include "FOSCommentBundle:Comment:reply.html.twig" with {"form": replyForm} %}
    </div>
</div>
