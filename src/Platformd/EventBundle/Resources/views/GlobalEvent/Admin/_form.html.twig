{% form_theme form 'SpoutletBundle:Admin:normalLabel.html.twig' %}
{% form_theme form 'SpoutletBundle:Admin:_bootstrapForms.html.twig' %}
{% form_theme form 'EventBundle::form_theme.html.twig' %}

{{ form_errors(form) }}

{% set isOnline = event is defined ? event.online : true %}

<div class="row-fluid">
    <fieldset>
        <legend>a) Event Information</legend>
        <div class="row-fluid first">
            <div class="span8">
                {{ form_row(form.name) }}
                {{ form_row(form.hostedBy) }}
                {{ form_row(form.bannerImage) }}
                {{ form_row(form.slug) }}
                {{ form_row(form.externalUrl) }}
                {{ form_row(form.content) }}
                {{ form_row(form.game) }}
                {{ form_row(form.online) }}
                <div id="location-info" {% if isOnline %}style="display:none;"{% endif %}>
                    {{ form_row(form.location) }}
                    {{ form_row(form.address1) }}
                    {{ form_row(form.address2) }}
                </div>
                <div>
                    <div style="display:inline-table">{{ form_row(form.startsAt) }}</div>
                    <div style="display:inline-table">{{ form_row(form.endsAt) }}</div>
                </div>
                {{ form_row(form.timezone) }}
                {{ form_row(form.sites) }}
                {{ form_row(form.published) }}
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend id="translations" style="cursor:pointer;">b) Translations (click here to view)</legend>
        <div class="row-fluid first" id="translations-wrapper" style="display:none;">
            <div class="span8">
                {{ form_widget(form.translations) }}
            </div>
        </div>
    </fieldset>
</div>

{{ form_rest(form) }}

{# @TODO put that in a form_theme if possible - could not find that #}
<script type="text/javascript">
    $(document).ready(function() {

        $('.event-date-picker').datepicker({
            minDate: 0,
            dateFormat: 'mm/dd/yy'
        });

        var $i = 0;
        $('#globalEvent_translations > .control-group > label').each(function (){
            switch ($i) {
                case 0:
                    $(this).text('JAPANESE');
                    break;
                case 1:
                    $(this).text('CHINESE');
                    break;
                case 2:
                    $(this).text("SPANISH");
                    break;
            }
            $i++;
        });

        $('#translations').click(function () {
            $('#translations-wrapper').toggle();
        });

        $("input[name='globalEvent[online]']").change(function () {
            var val = $(this).val();
            if(val == 0) {
                $('#location-info').fadeIn();
            } else {
                $('#location-info').fadeOut();
            }
        });
    });
</script>
