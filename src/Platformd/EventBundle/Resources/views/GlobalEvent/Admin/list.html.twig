{% extends 'SpoutletBundle::adminLayout.html.twig' %}
{% block title %}{{ "platformd.events.admin.title" | trans }}{% endblock %}

{% block content %}

<h1>{{ "platformd.events.event_listings.current_events" | trans }}</h1>

<table class="table table-striped table-bordered tablesorter">
    <thead>
        <tr>
            <th>{{ "platformd.events.event_listings.event" | trans }}</th>
            <th>{{ "tenant_site" | trans({}, 'admin') }}</th>
            <th>{{ 'url' | trans }}</th>
            <th>{{ "platformd.events.event_listings.start_date" | trans }}</th>
            <th>{{ "platformd.events.event_listings.games" | trans }}</th>
            <th>{{ "status" | trans }}</th>
            {% if app.user.isSuperAdmin %}
                <th>{{ "platformd.help.actions" | trans }}</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for event in events %}
        <tr class="eventListGroup_online">
            <td><a href="{{ path('admin_events_edit', { 'id' : event.id }) }}">{{ event.name }}</a></td>
            <td>
                {% for site in event.sites %}
                    {{ site.name -}}
                    {{- loop.last ? '' : ',' }}
                {% endfor %}
            </td>
            <td>
                <a href="{{ url('global_event_view', {'slug': event.slug, '_locale': site.defaultLocale }) }}">{{ url('global_event_view', {'slug': event.slug, '_locale': site.defaultLocale }) }}</a>
            </td>
            <td title="{{ event.startsAt|date }}">
                {{ event.startsAt|date_translate }}
            </td>
            <td>{{ event.game }}</td>
            <td>
                <i>
                {% if event.published%}
                    published
                {% else %}
                    unpublished
                {% endif %}
                </i>
            </td>
            <td>
                {% if not event.published %}
                    <a href="{{ path('admin_event_publish', { "id" : event.id })  }}">{{ "platformd.events.admin.publish" | trans }}</a>
                {% else %}
                    <a href="{{ path('admin_event_unpublish', { "id" : event.id }) }}">{{ "platformd.events.admin.unpublish" | trans }}</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a class="btn btn-primary" href="{{ path('admin_events_new') }}" >{{ "platformd.events.admin.create" | trans }}</a>
{% endblock %}
