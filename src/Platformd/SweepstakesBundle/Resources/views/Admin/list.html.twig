{% extends 'SpoutletBundle::adminLayout.html.twig' %}
{% block title %}{{ "sweepstakes" | trans }}{% endblock %}

{% block content %}

<h1>{{ "sweepstakes" | trans }}</h1>


<table class="table table-striped table-bordered tablesorter">
    <thead>
        <tr>
            <th>{{ "sweepstakes" | trans }}</th>
            <th>{{ "tenant_site" | trans({}, 'admin') }}</th>
            <th>{{ 'url' | trans }}</th>
            <th>{{ "platformd.help.actions" | trans }}</th>
        </tr>
    </thead>
    <tbody>
        {% for sweepstakes in sweepstakess %}
        <tr>
            <td><a href="{{ path('admin_sweepstakes_edit', { 'id' : sweepstakes.id }) }}">{{ sweepstakes.name }}</a></td>
            <td>
                {% for site in sweepstakes.sites %}
                    {{ site.name -}}
                    {{- loop.last ? '' : ',' }}
                {% endfor %}
            </td>
            <td>
                <a href="{{ url('sweepstakes_show', {'slug': sweepstakes.slug, '_locale': site.defaultLocale }) }}">{{ url('sweepstakes_show', {'slug': sweepstakes.slug, '_locale': site.defaultLocale }) }}</a>
            </td>
            <td>
                <a href="{{ path('admin_sweepstakes_edit', {"id" : sweepstakes.id}) }}">{{ "edit" | trans  }}</a>
                {% if not sweepstakes.published %}
                    <a href="{{ path('admin_sweepstakes_approve', { "id" : sweepstakes.id })  }}">{{ "approve" | trans }}</a>
                {% else %}
                    <a href="{{ path('admin_sweepstakes_unpublish', { "id" : sweepstakes.id }) }}">{{ "unpublish" | trans }}</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a class="btn btn-primary" href="{{ path('admin_sweepstakes_new') }}" style="margin-right:10px;">{{ "create" | trans }}</a>

{% endblock %}
