{% extends 'IdeaBundle::group_layout.html.twig' %}

{% block title %}{{ group.name }}{% endblock %}

{% block content %}

    <h2 class="left">{{ group.name }}</h2>

    {% if not group.isOwner(app.user) %}

        {% if group.isMember(app.user) %}
            {% set groupAction = 'leave' %}
        {% else %}
            {% set groupAction = 'join' %}
        {% endif %}

        <a href="{{ path('group_' ~ groupAction, {'slug': group.slug}) }}" class="left spcr-l2 btn">{{ groupAction|capitalize }} Group</a>

    {% endif %}
    
    <br/><hr/>

    <p>{{ group.description | striptags }}</p><br/>

    <h2 class="left">Events</h2>

    {% if is_granted('ROLE_ADMIN') and group.isOwner(app.user) %}
    <a href="{{ path('idea_admin_event', {'groupSlug': group.slug}) }}" class="left spcr-l2 btn">Create Event</a>
    {% endif %}

    <br/><hr/>

    {% if group.events|length > 0 %}
        {% for event in group.events %}
            <a href="{{ path('group_event_view', { 'groupSlug': group.slug, 'eventSlug': event.slug }) }}">{{ event.name }}</a>
             - {{ event.content|truncate(120) }}<br/><hr/>
        {% endfor %}
    {% endif %}

{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% include 'GroupBundle:Group:_css_assets.html.twig' %}
{% endblock %}
