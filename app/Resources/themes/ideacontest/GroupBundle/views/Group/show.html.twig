{% extends 'IdeaBundle::group_layout.html.twig' %}


{% block title %}
    {{ group.name }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script id="addJS">
        jQuery(document).ready(function($) {
            // Please note that autoHeight option has some conflicts with options like imageScaleMode, imageAlignCenter and autoScaleSlider
            // it's recommended to disable them when using autoHeight module
            $('#content-slider-1').royalSlider({
                autoHeight: true,
                arrowsNav: false,
                fadeinLoadedSlide: false,
                controlNavigationSpacing: 0,
                controlNavigation: 'tabs',
                imageScaleMode: 'none',
                imageAlignCenter:false,
                loop: false,
                loopRewind: true,
                numImagesToPreload: 6,
                keyboardNavEnabled: true,
                usePreloader: false,
                autoPlay: {
                    enabled: true,
                    pauseOnHover: true,
                    delay: 5000
                }
            });
        });
    </script>
{% endblock %}

{% block content %}

    <!-- royalslider code start -->
    <div class="content-slider-bg">
        <div id="content-slider-1" class="royalSlider contentSlider rsDefault">

            <div>
                <a href="{{ path('group_events', {'slug': group.slug}) }}" target="_blank"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-find.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Find
                </span>
            </div>
            <div>
                <a href="{{ path('idea_admin_event', {'groupSlug': group.slug}) }}" target="_blank"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-organize.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Organize
                </span>
            </div>
            <div>
                <a href="{{ path('group_join', {'slug': group.slug}) }}" target="_blank"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-join.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Join
                </span>
            </div>
            <div>
                <a href="#"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-speak.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Speak
                </span>
            </div>
            <div>
                <a href="#"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-sponsor.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Sponsor
                </span>
            </div>
            <div>
                <a href="#"><img src="{{ asset('themes/' ~ site.theme ~ '/spoutlet/img/ss-volunteer.jpg') }}" alt="" width="740" height="341"></a>
                <span class="rsTmb">
                    Volunteer
                </span>
            </div>

        </div>
    </div> <!-- end royalslider -->

    <hr>

    {% if nextEvent %}
        <div class="cBxLft">
            <h2 class="left">
                <a href="{{ path('group_event_view', {'groupSlug': group.slug, 'eventId': nextEvent.id}) }}" class="blu">{{ nextEvent.name }}</a>
            </h2>
            {% if not (nextEvent.isUserAttending(app.user)) %}
                <a href="{{ path('group_event_register_and_join', {'groupSlug': group.slug, 'eventId': nextEvent.id}) }}" class="btnTny right">Attend</a>
            {% endif %}
            <div class="clr"></div>

            <table summary="Next Event" class="tblStyle">
                <tbody>
                <tr>
                    <td width="20%"><strong>When:</strong></td>
                    <td width="80%">{{ nextEvent.DateAndTime|raw }}</td>
                </tr>
                {% if not nextEvent.getOnline %}
                    <tr>
                        <td><strong>Where:</strong></td>
                        <td>{{ nextEvent.location }}</td>
                    </tr>
                    <tr>
                        <td><strong>Address:</strong></td>
                        <td><a href="http://maps.google.com/?q={{ nextEvent.address1 }}, {{ nextEvent.address2 }}">{{ nextEvent.address1 }}<br/>{{ nextEvent.address2 }}</a></td>
                    </tr>
                {% endif %}
                <tr>
                    <td colspan="2">{{ nextEvent.attendeeCount }} attendee{% if nextEvent.attendeeCount != 1 %}s{% endif %}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="cBxRt">
            {% if not nextEvent.getOnline %}
                <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
                <div id="event-location-map">{{ vichgeo_map_for('large_location', nextEvent) }}</div>
            {% elseif groupEvents %}
                <h2 class="spnsrBar">More Events</h2>
                <ul class="scrollableSidebarWidget">
                    {% for event in groupEvents %}
                        <li>
                            <a href="{{ path('group_event_view', { 'groupSlug': group.slug, 'eventId': event.id }) }}" class="midtxt"><h3 class="blu" style="margin-top:5px;">{{ event.name }}</h3></a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    {% endif %}

{% endblock %}

{% set sidebar = true %}
{% block sidebar %}
    <div id="contentRt">

        <div class="rowBx">
            {{ group.description | raw }}
            <a href="{{ path('group_events', {'slug': group.slug}) }}" class="blu right">See Events</a>
            <div class="clr"></div>
        </div>

        {% if group.entrySets | length > 0 %}
            <h2 class="spnsrBar" style="margin-top:20px">Lists</h2>
            <ul class="scrollableSidebarWidget">
                {% for entrySet in group.entrySets %}
                <li>
                    <a href="{{ path('entry_set_view', {'entrySetId': entrySet.id}) }}"><h3 class="blu" style="margin-top:5px;">{{ entrySet.name }}</h3></a>
                </li>
                {% endfor %}
            </ul>
        {% endif %}

        {% if nextEvent %}
            {% if (not nextEvent.getOnline) and groupEvents %}
                <h2 class="spnsrBar" style="margin-top:20px">More Events</h2>
                <ul class="scrollableSidebarWidget">
                    {% for event in groupEvents %}
                        <li>
                            <a href="{{ path('group_event_view', { 'groupSlug': group.slug, 'eventId': event.id }) }}" class="midtxt"><h3 class="blu" style="margin-top:5px;">{{ event.name }}</h3></a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}

        <h2 class="spnsrBar" style="margin-top:20px">Organizer</h2>
        <a href="{{ path('profile', {userId: group.owner.id}) }}"><h3 class="blu" style="margin-top:5px;padding-left:5px;">{{ group.owner.name }}</h3></a>

        <h2 class="spnsrBar" style="margin-top:20px">{{ group.members|length }} Member{% if group.members|length > 1 %}s{% endif %}</h2>
        <ul style="padding-left:5px;">
            {% for member in group.members %}
                <li>
                    <a href="{{ path('profile', {'userId': member.id}) }}"><h3 class="blu" style="margin-top:5px">{{ member.name }}</h3></a>
                </li>
            {% else %}
                There are no members of this group yet.
            {% endfor %}
        </ul>
    </div>


{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% include 'GroupBundle:Group:_css_assets.html.twig' %}
{% endblock %}
