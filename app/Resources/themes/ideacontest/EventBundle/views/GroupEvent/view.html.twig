{% extends 'IdeaBundle::event_layout.html.twig' %}

{% block event_content %}
    <div id="contentLft">
        <h1 class="ctr">{{ event.name }}</h1>

        {% if event.rotatorImages | length > 0 %}
            <div class="intro">
                <div id="slideshow" class="pics">

                    {% for image in event.rotatorImages %}

                    <div class="unicusSlides">
                        <a href="#">
                            <img src="{{  media_path(image) }}" width="644" height="340"/>
                        </a>
                    </div>

                    {% endfor %}

                </div>

                <ul id="bullets"></ul> <!-- nav bullets -->
             </div>

            <script type="text/javascript">
                $(function() {
                    $('#slideshow').cycle({
                        fx:     'scrollHorz',
                        speed:  400,
                        timeout: 6000,
                        cleartypeNoBg: true,
                        pager:  '#bullets',
                        pagerAnchorBuilder: function paginate(idx, el) {
                            return '<a class="service' + idx + '" href="#" >&bull;</a>';
                        }
                    });
                });
            </script>
        {% endif %}

        <p>{{ event.content | raw }}</p>
    </div>

    <div id="contentRt">
        <h2 class="spnsrBar">Event Details</h2>
        <table id="eventDetails" class="tblStyle">
            <tr>
                <td><strong>Organizer:</strong></td>
                <td><a href="{{ path('profile', {'userId':event.user.id}) }}">{{ event.user.name }}</a></td>
            </tr>
            {% if event.startsAt %}
                <tr>
                    <td width="25%"><strong>When:</strong></td>
                    <td width="75%">{{ event.DateAndTime|raw }}</td>
                </tr>
            {% endif %}
            {% if event.location %}
                <tr>
                    <td width="25%"><strong>Where:</strong></td>
                    <td width="75%">{{ event.location }}</td>
                </tr>
                <tr>
                    <td width="25%"><strong>Address:</strong></td>
                    <td><a href="http://maps.google.com/?q={{ event.address1 }}, {{ event.address2 }}">{{ event.address1 }}<br/>{{ event.address2 }}</a></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
                        <div id="event-location-map">{{ vichgeo_map_for('location', event) }}</div>
                    </td>
                </tr>
            {% endif %}
        </table>

        <br>

        {% if event.entrySets | length > 0 %}
             <h2 class="spnsrBar">Lists</h2>
             <ul class="scrollableWidget">
                {% for entrySet in event.entrySets %}
                    <li class="spcr-t spcr-l3">
                        <a href="{{ path('entry_set_view', {'entrySetId': entrySet.id}) }}"><h3 class="blu">{{ entrySet.name }}</h3></a>
                    </li>
                {% endfor %}
            </ul>
            <br>
        {% endif %}

        
        {% if not (event.isUserAttending(app.user)) %}
            <h2 class="left">{{ event.attendees|length }} attendee{% if event.attendees|length != 1 %}s{% endif %}</h2>
            <a href="{{ path('group_event_register_and_join', {'groupSlug': group.slug, 'eventId': event.id}) }}" class="btnTny submit right marginlft">Attend</a>
        {% else %}
            <h3 class="left">You and {{ event.attendees|length - 1 }} other {% if event.attendees|length == 2 %}person{% else %}people{% endif %} are attending:</h3>
        {% endif %}
        <br class="clr">

        {% for member in event.attendees %}
            <a href="{{ path('profile', {'userId': member.id}) }}" class="blu" style="margin-top:5px;">{{ member.name }}</a><br/>
        {% endfor %}

    </div>

{% endblock %}
